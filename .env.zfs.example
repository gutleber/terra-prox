#!/bin/bash
# .env.zfs.example - Environment configuration for Proxmox VE 9.1.1 with ZFS RAID1
#
# Copy this file to .env and update the values for your Proxmox setup:
#   cp .env.zfs.example .env
#
# Then customize the values and source it:
#   source .env

# ============================================================================
# PROXMOX API CONFIGURATION (Required)
# ============================================================================

# Proxmox API endpoint URL
export TF_VAR_pve_api_url="https://YOUR_PROXMOX_HOST:8006/api2/json"

# API token ID (format: user@realm!tokenname)
# Example: terraform@pve!terraform-token
export TF_VAR_pve_token_id="terraform@pve!terraform-token"

# API token secret (save immediately after generation in Proxmox)
# Generated by: pveum user token add terraform@pve terraform-token -privsep 0
export TF_VAR_pve_token_secret="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"

# SSH user for Proxmox node access (usually 'root')
export TF_VAR_pve_user="root"

# Path to SSH private key for Proxmox access
export TF_VAR_pve_ssh_key_private="~/.ssh/terraform_id_ed25519"

# SSL certificate verification (set to 'true' only for self-signed certificates)
export TF_VAR_pve_insecure="false"

# ============================================================================
# PROXMOX INFRASTRUCTURE (Required)
# ============================================================================

# Proxmox node name (visible in web UI)
# Examples: 'pve', 'proxmox1', 'pve-01'
export TF_VAR_node="pve"

# Datacenter ID (usually 'local')
export TF_VAR_datacenter="local"

# ============================================================================
# ZFS RAID1 STORAGE CONFIGURATION
# ============================================================================
#
# Your Proxmox VE 9.1.1 uses ZFS RAID1 with pool name: "local-zfs"
# Both ISO storage and VM disks will use the same ZFS pool
#

# Storage for ISOs, backups, and snippets
# For your ZFS RAID1 setup: use "local-zfs"
export TF_VAR_storage_local="local-zfs"

# Storage for VM disks
# For your ZFS RAID1 setup: use "local-zfs"
# (You can use the same pool for both ISOs and VM disks)
export TF_VAR_storage_vm_disk="local-zfs"

# ============================================================================
# NETWORK CONFIGURATION
# ============================================================================

# Network bridge interface name
export TF_VAR_bridge_interface="vmbr0"

# Default VLAN ID for VMs
export TF_VAR_vlan_id="1"

# ============================================================================
# TERRAFORM CONFIGURATION (Optional)
# ============================================================================

# Enable debug logging (optional, comment out to disable)
# export TF_LOG="DEBUG"

# ============================================================================
# USAGE
# ============================================================================
#
# 1. Copy this file to .env:
#    cp .env.zfs.example .env
#
# 2. Update the values above with your Proxmox details:
#    - TF_VAR_pve_api_url: Your Proxmox host
#    - TF_VAR_pve_token_id: Your API token ID
#    - TF_VAR_pve_token_secret: Your API token secret
#    - TF_VAR_node: Your Proxmox node name
#
# 3. Source the .env file:
#    source .env
#
# 4. Use the dev-zfs environment for ZFS RAID1 setup:
#    cd terraform
#    terraform init
#    make plan-zfs
#    make apply-zfs
#
# ============================================================================
